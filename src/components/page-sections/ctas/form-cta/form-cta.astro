---
import CustomSection from "@builders/custom-section/custom-section.astro";
import Heading from "@core-elements/heading/heading.astro";
import Image from "@core-elements/image/image.astro";
import SimpleText from "@core-elements/simple-text/simple-text.astro";
import Form from "@forms/form/form.astro";
import Split from "@wrappers/split/split.astro";

const {
  heading = "",
  subtext = "",
  formAction = "./",
  formBlocks = [],
  imageSource = "",
  imageAlt = "",
  reverse = false,
  colorScheme,
  backgroundColor,
  paddingVertical = "4xl",
  rounded = false,
  class: className,
  ...rest
} = Astro.props;
---

<CustomSection
  class:list={["form-cta", className]}
  maxContentWidth="2xl"
  paddingHorizontal="lg"
  paddingVertical={paddingVertical}
  colorScheme={colorScheme}
  backgroundColor={backgroundColor}
  rounded={rounded}
  {...rest}
>
  <Split
    class="split"
    distributionMode="fixed-flexible"
    fixedWidth="400"
    verticalAlignment="center"
    reverse={reverse}
    minSplitWidth={640}
  >
    <Fragment slot="first">
      {
        heading && (
          <Heading level="h2" size="lg">
            {heading}
          </Heading>
        )
      }
      {subtext && <SimpleText size="md">{subtext}</SimpleText>}
      <Form class="form" action={formAction} formBlocks={formBlocks?.length > 0 ? formBlocks : []}>
        <slot />
      </Form>
    </Fragment>
    <Fragment slot="second">
      {
        imageSource && (
          <Image
            source={imageSource}
            rounded={true}
            alt={imageAlt}
            aspectRatio="landscape"
            editable={true}
            data-prop-src="imageSource"
            data-prop-alt="imageAlt"
            data-editable="image"
          />
        )
      }
    </Fragment>
  </Split>
</CustomSection>

---
import CustomSection from "@builders/custom-section/CustomSection.astro";
import Image from "@components/building-blocks/core-elements/image/Image.astro";
import Heading from "@core-elements/heading/Heading.astro";
import Text from "@core-elements/text/Text.astro";
import Carousel from "@wrappers/carousel/Carousel.astro";
import CarouselSlide from "@wrappers/carousel/CarouselSlide.astro";

const {
  heading = "",
  slides = [],
  backgroundColor = "base",
  class: className,
  editable = true,
  ...rest
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(rest).filter(([key]) => key !== "_component")
);
---

<CustomSection
  class:list={["image-gallery", className]}
  maxContentWidth="2xl"
  paddingHorizontal="lg"
  paddingVertical="4xl"
  colorScheme="default"
  backgroundColor={backgroundColor}
  {...htmlAttributes}
>
  <Heading level="h2" size="lg" alignX="center" data-prop="heading">
    {heading}
  </Heading>

  <Carousel
    label="Image Gallery Carousel"
    slideWidthPercent={100}
    minSlideWidth={0}
    autoPlay={false}
    autoScroll={false}
    editable={false}
  >
    {
      slides &&
        slides.length > 0 &&
        slides.map((slide, index) => (
          <CarouselSlide aria-label={`Slide ${index + 1} of ${slides.length}`}>
            <Image {...slide.image} />
            <Heading level="h3" size="md" alignX="center" data-prop={`slide.heading`}>
              {slide.heading}
            </Heading>
            <Text alignX="center">{slide.description}</Text>
          </CarouselSlide>
        ))
    }
  </Carousel>
</CustomSection>

<style lang="pcss" is:global>
  @layer page-sections {
    .image-gallery {
    }
  }
</style>

---
import Heading from "@core-elements/heading/Heading.astro";
import Image from "@core-elements/image/Image.astro";
import SimpleText from "@core-elements/simple-text/SimpleText.astro";
import Text from "@core-elements/text/Text.astro";
import Card from "@wrappers/card/Card.astro";
import Split from "@wrappers/split/Split.astro";

const {
  eyebrow = "",
  title = "",
  description = "",
  imageSource = "",
  imageAlt = "",
  minSplitWidth = 0,
  class: className,
  ...rest
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(rest).filter(([key]) => key !== "_component")
);

const hasImage = Boolean(imageSource);
---

<Card
  {...htmlAttributes}
  class:list={["feature-slider-item", className]}
  paddingHorizontal="xs"
  paddingVertical="none"
>
  <Split
    distributionMode="two-thirds-third"
    minSplitWidth={minSplitWidth}
    verticalAlignment="center"
  >
    <Fragment slot="first">
      {
        eyebrow && (
          <SimpleText class="eyebrow" data-prop="eyebrow">
            {eyebrow}
          </SimpleText>
        )
      }
      {
        title && (
          <Heading level="h2" size="lg" style="margin-top: 0;" data-prop="title">
            {title}
          </Heading>
        )
      }
      {description && <Text data-prop="description" text={description} />}
    </Fragment>
    {
      hasImage && (
        <Image
          slot="second"
          source={imageSource}
          alt={imageAlt || title}
          rounded={true}
          aspectRatio="portrait"
          priority={true}
          data-prop-src="imageSource"
          data-prop-alt="imageAlt"
          data-editable="image"
        />
      )
    }
  </Split>
</Card>

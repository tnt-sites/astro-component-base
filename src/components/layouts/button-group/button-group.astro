---
import clsx from "clsx";
import { resolveComponent } from "../../../utils/renderBlock";

const { direction, align, button_blocks, ...htmlAttributes } = Astro.props;

const alignMap = {
  start: "align-start",
  center: "align-center",
  end: "align-end",
} as const;

const alignClass = alignMap[align as keyof typeof alignMap] ?? "align-start";

const classNames = clsx(
  "button-group",
  direction === "column" ? "column" : "row",
  alignClass,
  className
);
---

<div {...htmlAttributes} class:list={classNames}>
  {
    button_blocks && button_blocks.length > 0 ? (
      button_blocks.map((block: any) => {
        const Component = resolveComponent(block._bookshop_name);

        return Component ? <Component {...block} /> : null;
      })
    ) : (
      <slot />
    )
  }
</div>

<style>
  .button-group {
    align-items: center;
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    position: relative;

    &.column {
      flex-direction: column;

      &.align-start {
        align-items: flex-start;
      }

      &.align-center {
        align-items: center;
      }

      &.align-end {
        align-items: flex-end;
      }
    }

    &.row {
      flex-direction: row;
    }

    &.align-center {
      justify-content: center;
    }

    &.align-end {
      justify-content: flex-end;
    }

    &.align-start {
      justify-content: flex-start;
    }
  }
</style>

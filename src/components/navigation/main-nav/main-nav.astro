---
import SmartImage from "@components/elements/smart-image/smart-image.astro";
import Bar from "@components/navigation/bar/bar.astro";
import Mobile from "@components/navigation/mobile/mobile.astro";
import ButtonGroup from "@components/wrappers/button-group/button-group.astro";
import Container from "@components/wrappers/container/container.astro";

const {
  logoSource,
  logoAlt = "logo",
  navData = [],
  buttonBlocks = [],
  class: className,
  ...rest
} = Astro.props;

const mobileNavData = [
  ...navData,
  ...buttonBlocks.map((button: any) => ({
    name: button.text || "Button",
    path: button.href || "#",
    children: [],
  })),
];
---

<Container
  maxContentWidth="2xl"
  paddingHorizontal="md"
  paddingVertical="none"
  class:list={["main-nav", className]}
  {...rest}
>
  {logoSource && <SmartImage source={logoSource} alt={logoAlt} />}
  <div style=" align-items: center;display: flex;">
    <Bar navData={navData} class="desktop-main-nav" />

    {
      buttonBlocks.length > 0 && (
        <ButtonGroup
          direction="row"
          align="center"
          class="desktop-button-group"
          buttonBlocks={buttonBlocks}
        />
      )
    }
  </div>
  <Mobile
    logoSource={logoSource}
    logoAlt={logoAlt}
    navData={mobileNavData}
    class="mobile-main-nav"
  />
</Container>

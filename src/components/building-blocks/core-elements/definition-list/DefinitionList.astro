---
import DefinitionListItem from "./DefinitionListItem.astro";

const {
  items,
  alignX = "start",
  class: className,
  "data-prop": customDataProp = "items",
  editable = true,
  ...restProps
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(restProps).filter(([key]) => key !== "_component")
);

const arrayDataAttributes = editable
  ? {
      "data-editable": "array",
      "data-prop": customDataProp,
      "data-component-key": "_component",
      "data-id-key": "_component",
    }
  : {};
---

<dl
  class:list={["definition-list", `alignment-${alignX}`, className]}
  {...arrayDataAttributes}
  {...htmlAttributes}
>
  {
    items && items.length > 0 ? (
      items.map((item: any) => (
        <editable-array-item data-component="building-blocks/core-elements/definition-list/definition-list-item">
          <DefinitionListItem title={item.title} text={item.text} editable={editable} />
        </editable-array-item>
      ))
    ) : (
      <slot />
    )
  }
</dl>

<style lang="pcss">
  .definition-list {
    display: grid;
    gap: var(--spacing-em-sm) var(--spacing-em-md);
    grid-template-columns: auto 1fr;
    margin: 0;
    margin-top: var(--spacing-lg);

    > :global(editable-array-item) {
      display: grid;
      gap: var(--spacing-em-sm) var(--spacing-em-md);
      grid-column: 1 / -1;
      grid-template-columns: auto 1fr;
    }

    &.alignment-center {
      align-items: center;
      grid-template-columns: 1fr 1fr;
      justify-content: center;

      > :global(editable-array-item) {
        grid-template-columns: 1fr 1fr;
      }

      > :global(editable-array-item) > :global(.title),
      > .title {
        text-align: end;
      }
    }

    &.alignment-end {
      align-items: end;
      grid-template-columns: auto auto;
      justify-content: end;

      > :global(editable-array-item) {
        grid-template-columns: auto auto;
      }

      > :global(editable-array-item) > :global(.title),
      > .title {
        text-align: start;
      }

      > :global(editable-array-item) > :global(.content),
      > .content {
        text-align: end;
      }
    }

    > :global(editable-array-item) > :global(.content),
    > .content {
      margin: 0;
    }
  }
</style>

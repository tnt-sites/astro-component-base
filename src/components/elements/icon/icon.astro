---
import { Icon as AstroIcon } from "astro-icon/components";
import clsx from "clsx";

const { name, size, background, ...restProps } = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(restProps).filter(([key]) => !key.startsWith("_"))
);

const classNames = clsx(
  "icon",
  `size-${size}`,
  `background-${background}`,
  name?.includes("fill/") && "fill",
  className
);
---

<AstroIcon name={name} class:list={classNames} {...htmlAttributes} />

<style>
  .icon {
    all: unset;
    border: 1px solid transparent;
    border-radius: var(--radius-xs);
    color: var(--color-text-on-muted);
    display: inline-block;
    height: 1.1em;
    line-height: 0;
    vertical-align: middle;
    width: 1.1em;
  }

  .flip-rtl {
    transform: scaleX(-1);
  }

  svg {
    max-height: 100%;
  }

  .background-subtle {
    padding: var(--spacing-em-xs);
  }

  .background-subtle {
    background-color: var(--color-bg-surface);
  }

  .fill {
    fill: currentcolor;
  }

  .size-sm {
    font-size: var(--font-size-sm);
  }

  .size-md {
    font-size: var(--font-size-xl);
  }

  .size-lg {
    font-size: var(--font-size-3xl);
  }
</style>

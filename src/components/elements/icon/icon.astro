---
import { Icon as AstroIcon } from "astro-icon/components";
import clsx from "clsx";
import "./icon.pcss";

const { name, size = "lg", background, className, ...rest } = Astro.props;

const isValidName = name && name.trim();

if (!isValidName) {
  console.warn("Icon component received empty or invalid name:", name);
}

const htmlAttributes = Object.fromEntries(
  Object.entries(rest).filter(([key]) => !key.startsWith("_"))
);

const classNames = clsx(
  "icon",
  `size-${size}`,
  background && `background-${background}`,
  name?.includes("social/") && "fill",
  className
);
---

{isValidName && <AstroIcon name={name} class:list={classNames} {...htmlAttributes} />}
